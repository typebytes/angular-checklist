<ac-toolbar [class.desktop]="desktop() === true" [class.small]="small() === true">
  <button class="menu-button" mat-icon-button (click)="sideNav.toggle()"><mat-icon>menu</mat-icon></button>
  <ac-toolbar-logo [showText]="desktop() === true"></ac-toolbar-logo>
  <ac-dropdown
    (selectionChange)="navigateToProject($event)"
    [items]="projects()"
    [selected]="selectedProjectId()"
    bindLabel="name"
    bindValue="id"
  >
    <ac-dropdown-static-options>
      <ac-dropdown-static-option routerLink="/"> <mat-icon>edit</mat-icon> Manage Projects </ac-dropdown-static-option>
    </ac-dropdown-static-options>
  </ac-dropdown>
  @if (mediumUp()) {
  <ac-checklist-search></ac-checklist-search>
  }
</ac-toolbar>
<mat-sidenav-container>
  <mat-sidenav [mode]="sideNavMode()" [autoFocus]="false" #sideNav [opened]="mediumUp()">
    <div class="section-container">
      <section>
        <nav class="nav-item">
          <ac-score-chart [class.primary]="rla.isActive" [score]="favoritesScore()"></ac-score-chart>
          <a class="sidenav-link" routerLink="favorites" #rla="routerLinkActive" routerLinkActive="active">
            <span
              [matBadge]="favoritesCount()"
              [matBadgeHidden]="favoritesCount() <= 0"
              matBadgeColor="accent"
              matBadgeOverlap="false"
              >Favorites</span
            >
          </a>
        </nav>
      </section>
      <section class="category-list-wrapper">
        <div class="section-header">
          <h4>CATEGORIES</h4>
          <mat-slide-toggle (change)="toggleEditMode()">Edit</mat-slide-toggle>
        </div>
        <div class="category-list">
          @for (category of categories(); track category.slug) {
          <nav class="category">
            @if (!editMode()) {
            <ac-score-chart [class.primary]="rla.isActive" [score]="category.score"></ac-score-chart>
            }
            <a
              class="sidenav-link"
              [class.disabled]="!category.enabled"
              #rla="routerLinkActive"
              routerLinkActive="active"
              [routerLink]="category.slug"
            >
              {{ category.title }}
            </a>
            @if (editMode()) {
            <mat-checkbox
              color="primary"
              (click)="toggleCategory(category)"
              [checked]="category.enabled"
            ></mat-checkbox>
            }
          </nav>
          }
        </div>
      </section>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="scroll-container"><router-outlet></router-outlet></div>
    @if (editMode()) {
    <div class="overlay"><span>üßê Ups, seems like you're in edit mode!</span></div>
    }
  </mat-sidenav-content>
</mat-sidenav-container>
<ac-footer></ac-footer>
